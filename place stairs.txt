how it works now:
universe >
for 1 = 1 to totalFLoors do
> cave.generate
place stairs?

how it should work:

universe>
generate totalFloors many floors
> gave generate
for 1 = 1 to totalFLoors do
begin
generate
store location of last stairs
generate
if cannot place stairs generate again
else
place stairs and generate next floor